<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Gold Market News – GoldRates</title>
  <link rel="icon" href="assets/favicon.png"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { 500: '#f59e0b', 600: '#d97706' }
          }
        }
      }
    };
  </script>

  <!-- CMS API base (WITHOUT /posts at the end) -->
  <meta name="cms-api" content="https://goldrate-cms.onrender.com" />

  <!-- Optional: basic typography for news content -->
  <style>
    .prose {
      font-size: 0.95rem;
      line-height: 1.7;
      color: #111827;
    }
    .prose p {
      margin-top: 0.75rem;
      margin-bottom: 0.75rem;
    }
    .prose h1 {
      font-size: 1.875rem;
      line-height: 2.25rem;
      font-weight: 700;
      margin-top: 1.75rem;
      margin-bottom: 0.75rem;
    }
    .prose h2 {
      font-size: 1.5rem;
      line-height: 2rem;
      font-weight: 600;
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
    }
    .prose h3 {
      font-size: 1.25rem;
      line-height: 1.75rem;
      font-weight: 600;
      margin-top: 1.25rem;
      margin-bottom: 0.5rem;
    }
    .prose ul,
    .prose ol {
      margin-top: 0.75rem;
      margin-bottom: 0.75rem;
      padding-left: 1.25rem;
    }
    .prose ul li {
      list-style-type: disc;
    }
    .prose ol li {
      list-style-type: decimal;
    }
    .prose strong {
      font-weight: 600;
    }
    .prose a {
      color: #d97706;
      text-decoration: underline;
      text-decoration-thickness: 1px;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- HEADER (same as Home) -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between">
      <a class="flex items-center gap-3 font-semibold" href="index.html">
        <img alt="GoldRates" class="h-12 w-auto" src="./assets/goldrates-black.png"/>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a class="hover:text-amber-600" href="index.html#live">Live Rates</a>
        <a class="hover:text-amber-600" href="about.html">About</a>
        <a class="hover:text-amber-600" href="contact.html">Contact</a>
        <div class="flex gap-4 text-xl">
          <a href="https://www.facebook.com/Goldrates2025/" aria-label="Facebook" class="opacity-80 hover:opacity-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.02 3.66 9.18 8.44 9.96v-7.05H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.25c-1.23 0-1.61.77-1.61 1.56v1.87h2.74l-.44 2.91h-2.3v7.05C18.34 21.25 22 17.09 22 12.07z"/>
            </svg>
          </a>
          <a href="https://x.com/GoldRates2025" aria-label="X" class="opacity-80 hover:opacity-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13.5 10.7 20.4 3h-1.6l-6.1 6.9L7.3 3H3l7.3 10.4L3 21h1.6l6.6-7.4 5.7 7.4H21l-7.5-10.3z"/>
            </svg>
          </a>
          <!-- Official-style LinkedIn logo -->
          <a href="https://www.linkedin.com/company/goldrates/" aria-label="LinkedIn" class="opacity-80 hover:opacity-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor">
              <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708C16 15.487 15.474 16 14.825 16H1.175A1.15 1.15 0 0 1 0 14.854V1.146zM4.943 13.394V6.169H2.542v7.225h2.401zM3.74 5.155c.837 0 1.358-.554 1.358-1.248C5.083 3.198 4.577 2.66 3.756 2.66c-.822 0-1.328.538-1.343 1.247 0 .694.52 1.248 1.327 1.248h.001zm4.91 8.239h2.4V9.377c0-.216.016-.432.08-.586.175-.431.574-.878 1.243-.878.877 0 1.228.662 1.228 1.634v3.847h2.4V9.58c0-2.23-1.188-3.268-2.776-3.268-1.28 0-1.845.711-2.165 1.203h.032v-1.034h-2.4c.03.662 0 7.225 0 7.225z"/>
            </svg>
          </a>
          <a href="https://www.instagram.com/goldrates2025/" aria-label="Instagram" class="opacity-80 hover:opacity-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 3.5A5.5 5.5 0 1 1 6.5 13 5.51 5.51 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zm5.75-3a1.25 1.25 0 1 1-1.25 1.25A1.24 1.24 0 0 1 17.75 6.5z"/>
            </svg>
          </a>
        </div>
      </nav>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    <a href="index.html" class="text-sm text-amber-600 hover:underline">&larr; Back to home</a>
    <h1 class="text-3xl font-bold mt-4" id="page-title">Gold Market News</h1>
    <p id="page-sub" class="mt-1 text-sm text-gray-500"></p>

    <!-- List container -->
    <div id="news-list" class="mt-6 space-y-4 hidden"></div>

    <!-- Single article container -->
    <article id="news-post" class="mt-6 hidden">
      <h2 id="post-title" class="text-2xl font-semibold"></h2>
      <div id="post-meta" class="mt-1 text-xs text-gray-500"></div>
      <img id="post-cover" class="mt-4 rounded-xl max-h-80 w-full object-cover hidden" alt="Cover"/>
      <div id="post-content" class="prose max-w-none mt-6"></div>
    </article>

    <div id="status" class="mt-6 text-sm text-gray-500"></div>
  </main>

  <!-- JS -->
  <script>
    const metaApi = document.querySelector('meta[name="cms-api"]')?.content || location.origin;
    const API = metaApi.replace(/\/+$/,'');
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug');
    const el = id => document.getElementById(id);

    async function loadList() {
      el('page-title').textContent = 'Gold Market News';
      el('page-sub').textContent = 'Latest news and insights from the gold market.';
      el('status').textContent = 'Loading news...';
      el('news-post').classList.add('hidden');
      el('news-list').classList.remove('hidden');

      try {
        const res = await fetch(`${API}/posts?type=news&published=true&page=1&limit=20`);
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || `HTTP ${res.status}`);

        if (!data.items || !data.items.length) {
          el('news-list').innerHTML = '<div class="text-sm text-gray-500">No news articles yet.</div>';
          el('status').textContent = '';
          return;
        }

        el('news-list').innerHTML = data.items.map(p => {
          const date = p.publishedAt || p.createdAt;
          const d = date ? new Date(date).toLocaleDateString() : '';
          const href = `news.html?slug=${encodeURIComponent(p.slug)}`;
          return `
            <a href="${href}" class="block bg-white rounded-xl border px-4 py-3 hover:shadow-sm transition">
              <div class="text-xs text-gray-500">${d}</div>
              <div class="font-semibold mt-1">${p.title || ''}</div>
              <div class="text-sm text-gray-600 mt-1">${p.excerpt || ''}</div>
            </a>
          `;
        }).join('');

        el('status').textContent = '';
      } catch (err) {
        console.error(err);
        el('status').textContent = 'Failed to load news: ' + (err.message || err);
      }
    }

    async function loadSingle(slug) {
      el('page-title').textContent = 'Gold Market News';
      el('page-sub').textContent = '';
      el('status').textContent = 'Loading article...';
      el('news-list').classList.add('hidden');
      el('news-post').classList.remove('hidden');

      try {
        const res = await fetch(`${API}/posts/${encodeURIComponent(slug)}`);
        const p = await res.json();
        if (!res.ok) throw new Error(p.error || `HTTP ${res.status}`);

        const date = p.publishedAt || p.createdAt;
        const d = date ? new Date(date).toLocaleDateString() : '';

        el('post-title').textContent = p.title || '';
        el('post-meta').textContent = d ? `Published on ${d}` : '';
        if (p.coverImage) {
          el('post-cover').src = p.coverImage.startsWith('http') ? p.coverImage : `${API}${p.coverImage}`;
          el('post-cover').classList.remove('hidden');
        } else {
          el('post-cover').classList.add('hidden');
        }
        el('post-content').innerHTML = p.content || '';
        el('status').textContent = '';
      } catch (err) {
        console.error(err);
        el('status').textContent = 'Failed to load article: ' + (err.message || err);
        el('news-post').classList.add('hidden');
      }
    }

    if (slug) {
      loadSingle(slug);
    } else {
      loadList();
    }
  </script>

  <!-- FOOTER (same as Home) -->
  <footer class="mt-20 bg-black text-white">
    <div class="max-w-7xl mx-auto px-6 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
        <div>
          <div class="flex items-center gap-0 mb-4">
            <img src="assets/goldrates-white.png" alt="GoldRates" class="h-16 w-auto"/>
          </div>
          <div class="flex gap-4 text-xl">
            <a href="https://www.facebook.com/Goldrates2025/" aria-label="Facebook" class="opacity-80 hover:opacity-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.02 3.66 9.18 8.44 9.96v-7.05H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.25c-1.23 0-1.61.77-1.61 1.56v1.87h2.74l-.44 2.91h-2.3v7.05C18.34 21.25 22 17.09 22 12.07z"/>
              </svg>
            </a>
            <a href="https://x.com/GoldRates2025" aria-label="X" class="opacity-80 hover:opacity-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M13.5 10.7 20.4 3h-1.6l-6.1 6.9L7.3 3H3l7.3 10.4L3 21h1.6l6.6-7.4 5.7 7.4H21l-7.5-10.3z"/>
              </svg>
            </a>
            <!-- Official-style LinkedIn logo -->
            <a href="https://www.linkedin.com/company/goldrates/" aria-label="LinkedIn" class="opacity-80 hover:opacity-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 16 16" fill="currentColor">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708C16 15.487 15.474 16 14.825 16H1.175A1.15 1.15 0 0 1 0 14.854V1.146zM4.943 13.394V6.169H2.542v7.225h2.401zM3.74 5.155c.837 0 1.358-.554 1.358-1.248C5.083 3.198 4.577 2.66 3.756 2.66c-.822 0-1.328.538-1.343 1.247 0 .694.52 1.248 1.327 1.248h.001zm4.91 8.239h2.4V9.377c0-.216.016-.432.08-.586.175-.431.574-.878 1.243-.878.877 0 1.228.662 1.228 1.634v3.847h2.4V9.58c0-2.23-1.188-3.268-2.776-3.268-1.28 0-1.845.711-2.165 1.203h.032v-1.034h-2.4c.03.662 0 7.225 0 7.225z"/>
              </svg>
            </a>
            <a href="https://www.instagram.com/goldrates2025/" aria-label="Instagram" class="opacity-80 hover:opacity-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 3.5A5.5 5.5 0 1 1 6.5 13 5.51 5.51 0 0 1 12 7.5zm0 2A3.5 3.5 0 1 0 15.5 13 3.5 3.5 0 0 0 12 9.5zm5.75-3a1.25 1.25 0 1 1-1.25 1.25A1.24 1.24 0 0 1 17.75 6.5z"/>
              </svg>
            </a>
          </div>
        </div>

        <div>
          <div class="uppercase tracking-wide text-gray-400 text-sm mb-3">Explore</div>
          <ul class="space-y-2 text-gray-200">
            <li><a href="about.html" class="hover:text-amber-400">About us</a></li>
            <li><a href="blog.html" class="hover:text-amber-400">Blog</a></li>
            <li><a href="news.html" class="hover:text-amber-400">Article</a></li>
            <li><a href="contact.html" class="hover:text-amber-400">Contact</a></li>
          </ul>
        </div>

        <div>
          <div class="uppercase tracking-wide text-gray-400 text-sm mb-3">Useful</div>
          <ul class="space-y-2 text-gray-200">
            <li><a href="privacy-policy.html" class="hover:text-amber-400">Privacy Policy</a></li>
            <li><a href="terms-of-use.html" class="hover:text-amber-400">Terms Of Use</a></li>
            <li><a href="disclaimer.html" class="hover:text-amber-400">Disclaimer</a></li>
            <li><a href="data-source.html" class="hover:text-amber-400">Data Source</a></li>
            <li><a href="cookie.html" class="hover:text-amber-400">Cookie Policy</a></li>
          </ul>
        </div>

        <div>
          <div class="text-2xl font-semibold mb-3">info@goldrates.com</div>
          <p class="text-gray-300 text-sm leading-relaxed">
            Disclaimer: Goldrates.com provides information for general purposes only.
            Prices, forecasts, and news may change without notice. We do not offer financial advice,
            and users should do their own research before making investment decisions.
          </p>
        </div>
      </div>
    </div>
    <div class="border-t border-white/10">
      <div class="max-w-7xl mx-auto px-6 py-4 text-sm text-gray-400" style="display: flex;justify-content: center;">
        © 2025 GoldRates.com, All Rights Reserved. Development by Tecnavis.in
      </div>
    </div>
  </footer>

</body>
</html>
